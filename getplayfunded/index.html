<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">
  <title>PlayFul Rewards: Get Paid Real Money</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Montserrat:wght@700;800;900&display=swap" rel="stylesheet">
  
  <style>
    :root {
      --bg-dark: #1a0f5c;
      --brand-primary: #FFD700;
      --brand-secondary: #FFA500;
      --text-main: #ffffff;
      --text-mute: #c7b8ff;
      --purple-deep: #2d1275;
      --font-stack: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      -webkit-tap-highlight-color: transparent;
    }

    body {
      font-family: var(--font-stack);
      background: linear-gradient(135deg, #1a0f5c 0%, #2d1275 50%, #4a1fb8 100%);
      background-attachment: fixed;
      color: var(--text-main);
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      padding: 16px;
      position: relative;
      overflow-x: hidden;
    }

    .container {
      width: 100%;
      max-width: 480px;
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    .step-wrapper {
      display: flex;
      flex-direction: column;
      gap: 15px;
      width: 100%;
      animation: fadeIn 0.4s ease-out;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .hidden {
      display: none !important;
    }

    .header-module {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0 5px;
      margin-bottom: 5px;
    }

    .logo-badge {
      font-weight: 700;
      font-size: 14px;
      letter-spacing: 0.5px;
      color: var(--brand-primary);
      text-transform: uppercase;
      display: flex;
      align-items: center;
      gap: 8px;
      text-shadow: 0 0 15px rgba(255, 215, 0, 0.4);
    }

    .logo-badge::before {
      content: 'üí∞';
      font-size: 18px;
    }

    .step-indicator {
      font-size: 12px;
      color: var(--text-mute);
      background: rgba(255, 255, 255, 0.1);
      padding: 4px 12px;
      border-radius: 20px;
      border: 1px solid rgba(255, 215, 0, 0.3);
    }

    .hero-module {
      text-align: left;
      padding: 10px 5px;
    }

    .main-headline {
      font-size: clamp(32px, 8vw, 40px);
      line-height: 1.1;
      font-weight: 800;
      margin-bottom: 12px;
      color: #fff;
      letter-spacing: -0.5px;
    }

    .main-headline .highlight {
      color: var(--purple-deep);
      background: linear-gradient(135deg, var(--brand-primary) 0%, var(--brand-secondary) 100%);
      padding: 0 10px;
      border-radius: 6px;
      display: inline-block;
      transform: rotate(-2deg);
      margin-left: -5px;
      box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3);
    }

    .sub-headline {
      font-size: clamp(14px, 3.5vw, 16px);
      color: var(--text-mute);
      line-height: 1.5;
      font-weight: 400;
      margin-top: 10px;
    }

    .sub-headline b {
      color: var(--brand-primary);
      font-weight: 600;
    }

    .review-stars {
      display: flex;
      align-items: center;
      gap: 5px;
      margin-bottom: 10px;
      font-size: 14px;
      font-weight: 600;
    }

    .star-icon {
      color: var(--brand-primary);
      width: 16px;
      height: 16px;
      fill: currentColor;
    }

    .review-text {
      color: var(--text-mute);
      font-weight: 400;
      margin-left: 5px;
      font-size: 13px;
    }

    .bonus-notification {
      background: linear-gradient(135deg, rgba(74, 31, 184, 0.6) 0%, rgba(45, 18, 117, 0.6) 100%);
      border-left: 4px solid var(--brand-primary);
      border-radius: 12px;
      padding: 12px 15px;
      margin-bottom: 15px;
      display: flex;
      align-items: center;
      gap: 12px;
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 215, 0, 0.2);
    }

    .bonus-icon {
      font-size: 24px;
    }

    .bonus-text {
      display: flex;
      flex-direction: column;
    }

    .bonus-title {
      font-weight: 700;
      color: #fff;
      font-size: 15px;
    }

    .bonus-sub {
      color: var(--brand-primary);
      font-size: 12px;
      font-weight: 600;
      text-transform: uppercase;
    }

    .stats-container {
      display: flex;
      gap: 10px;
      margin-bottom: 5px;
    }

    .stat-pill {
      background: rgba(74, 31, 184, 0.4);
      border: 1px solid rgba(255, 215, 0, 0.3);
      border-radius: 12px;
      padding: 10px 14px;
      display: flex;
      align-items: center;
      gap: 10px;
      flex: 1;
      backdrop-filter: blur(10px);
    }

    .stat-pill svg {
      fill: var(--brand-primary);
      width: 20px;
      height: 20px;
      flex-shrink: 0;
    }

    .stat-data {
      display: flex;
      flex-direction: column;
    }

    .stat-val {
      font-weight: 700;
      font-size: 15px;
      color: var(--brand-primary);
    }

    .stat-lbl {
      font-size: 10px;
      text-transform: uppercase;
      color: var(--text-mute);
    }

    .interaction-module {
      display: flex;
      flex-direction: column;
      gap: 15px;
      margin-top: 10px;
    }

    .age-cards-container {
      display: flex;
      flex-direction: column;
      gap: 12px;
      width: 100%;
    }

    .age-card {
      background: linear-gradient(135deg, rgba(74, 31, 184, 0.6) 0%, rgba(45, 18, 117, 0.6) 100%);
      border: 2px solid var(--brand-primary);
      border-radius: 14px;
      padding: 16px 20px;
      display: flex;
      align-items: center;
      gap: 16px;
      cursor: pointer;
      transition: all 0.25s ease;
      backdrop-filter: blur(10px);
      box-shadow: 0 0 25px rgba(255, 215, 0, 0.25), 0 4px 15px rgba(0, 0, 0, 0.3);
      width: 100%;
      -webkit-tap-highlight-color: rgba(255, 215, 0, 0.2);
    }

    .age-card:active {
      transform: scale(0.98);
      box-shadow: 0 0 30px rgba(255, 215, 0, 0.4), 0 2px 10px rgba(0, 0, 0, 0.4);
    }

    .age-card-icon {
      font-size: 40px;
      flex-shrink: 0;
      filter: drop-shadow(0 0 8px rgba(255, 215, 0, 0.6));
    }

    .age-card-content {
      display: flex;
      flex-direction: column;
      gap: 3px;
      flex: 1;
      min-width: 0;
    }

    .age-card-title {
      font-size: clamp(20px, 5vw, 22px);
      font-weight: 800;
      color: var(--brand-primary);
      text-shadow: 0 0 8px rgba(255, 215, 0, 0.4);
      letter-spacing: 0.5px;
    }

    .age-card-desc {
      font-size: clamp(12px, 3vw, 14px);
      color: var(--text-mute);
      font-weight: 500;
      line-height: 1.3;
    }

    .instruction-text {
      text-align: center;
      color: var(--brand-primary);
      font-size: clamp(15px, 4vw, 16px);
      font-weight: 600;
      margin-top: 20px;
      margin-bottom: 10px;
      text-shadow: 0 0 8px rgba(255, 215, 0, 0.4);
    }

    .headline-row {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 16px;
    }

    .success-icon-floating {
      width: 44px;
      height: 44px;
      border: 2px solid var(--brand-primary);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
      box-shadow: 0 0 15px rgba(255, 215, 0, 0.3);
    }

    .success-icon-floating svg {
      width: 26px;
      height: 26px;
      fill: var(--brand-primary);
    }

    .youre-in-headline {
      font-size: clamp(36px, 9vw, 46px);
      font-weight: 700;
      color: #fff;
      line-height: 1;
      display: flex;
      align-items: center;
      gap: 8px;
      flex-wrap: wrap;
    }

    .in-block {
      background: linear-gradient(135deg, var(--brand-primary) 0%, var(--brand-secondary) 100%);
      color: var(--purple-deep);
      padding: 4px 12px;
      border-radius: 6px;
      transform: rotate(-3deg);
      display: inline-block;
      font-weight: 800;
      box-shadow: 0 4px 12px rgba(255, 215, 0, 0.3);
    }

    .cta-button {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 10px;
      width: 100%;
      background: linear-gradient(135deg, var(--brand-primary) 0%, var(--brand-secondary) 100%);
      color: var(--purple-deep);
      font-size: clamp(17px, 4.5vw, 19px);
      font-weight: 800;
      padding: 20px;
      border-radius: 12px;
      text-decoration: none;
      text-transform: uppercase;
      text-align: center;
      box-shadow: 0 0 25px rgba(255, 215, 0, 0.4), 0 6px 15px rgba(0, 0, 0, 0.3);
      margin-top: 20px;
      cursor: pointer;
      border: none;
      transition: all 0.25s ease;
      -webkit-tap-highlight-color: rgba(0, 0, 0, 0.2);
    }

    .cta-button:active {
      transform: scale(0.98);
      box-shadow: 0 0 30px rgba(255, 215, 0, 0.5), 0 3px 10px rgba(0, 0, 0, 0.4);
    }

    .cta-button svg {
      width: 24px;
      height: 24px;
      fill: var(--purple-deep);
    }

    .roadmap-floating {
      margin-top: 15px;
      padding-left: 10px;
    }

    .roadmap-label {
      font-size: 11px;
      color: #888;
      text-transform: uppercase;
      letter-spacing: 1px;
      margin-bottom: 15px;
    }

    .timeline-item {
      display: flex;
      align-items: flex-start;
      gap: 15px;
      margin-bottom: 18px;
      position: relative;
    }

    .timeline-item:not(:last-child)::after {
      content: '';
      position: absolute;
      top: 24px;
      left: 9px;
      width: 1px;
      height: calc(100% + 4px);
      background: rgba(255, 215, 0, 0.25);
    }

    .timeline-marker {
      width: 20px;
      height: 20px;
      background: var(--purple-deep);
      border: 2px solid var(--brand-primary);
      border-radius: 50%;
      flex-shrink: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--brand-primary);
      font-size: 10px;
      box-shadow: 0 0 12px rgba(255, 215, 0, 0.3);
    }

    .timeline-marker.locked {
      border-color: rgba(255, 215, 0, 0.25);
      color: rgba(255, 215, 0, 0.25);
      box-shadow: none;
    }

    .timeline-text strong {
      display: block;
      font-size: 14px;
      margin-bottom: 2px;
      color: #fff;
    }

    .timeline-text span {
      font-size: 13px;
      color: var(--text-mute);
    }

    .step2-content {
      width: 100%;
    }

    .viral-container {
      text-align: center;
      width: 100%;
    }

    .secure-badges {
      margin-top: 15px;
      display: flex;
      justify-content: center;
      gap: 10px;
      opacity: 0.5;
    }

    .secure-badges svg {
      height: 18px;
      fill: var(--brand-primary);
    }

    /* Mobile optimizations */
    @media (max-width: 480px) {
      body {
        padding: 12px;
      }

      .container {
        gap: 16px;
      }

      .step-wrapper {
        gap: 12px;
      }

      .bonus-notification {
        padding: 10px 12px;
        gap: 10px;
      }

      .stat-pill {
        padding: 8px 12px;
        gap: 8px;
      }

      .age-card {
        padding: 14px 16px;
        gap: 14px;
      }

      .age-card-icon {
        font-size: 36px;
      }

      .cta-button {
        padding: 18px;
      }

      .success-icon-floating {
        width: 40px;
        height: 40px;
      }

      .success-icon-floating svg {
        width: 22px;
        height: 22px;
      }

      .timeline-item {
        margin-bottom: 16px;
      }
    }

    @media (max-width: 360px) {
      .age-card {
        padding: 12px 14px;
      }

      .age-card-icon {
        font-size: 32px;
      }

      .stat-pill {
        flex-direction: column;
        align-items: flex-start;
        padding: 8px 10px;
      }
    }
  </style>
</head>

<body>
  <div class="container">
    <!-- STEP 1 -->
    <div id="step1" class="step-wrapper">
      <div class="header-module">
        <div class="logo-badge">PlayFul Rewards App</div>
        <div class="step-indicator">1 / 2</div>
      </div>

      <div class="hero-module">
        <h1 class="main-headline">Get Paid for <br><span class="highlight">Everyday Stuff</span></h1>

        <div class="bonus-notification">
          <div class="bonus-icon">üéÅ</div>
          <div class="bonus-text">
            <div class="bonus-title">$5 Sign up Bonus</div>
            <div class="bonus-sub">Available for new users</div>
          </div>
        </div>

        <div class="review-stars">
          <svg class="star-icon" viewBox="0 0 24 24">
            <path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z" />
          </svg>
          <svg class="star-icon" viewBox="0 0 24 24">
            <path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z" />
          </svg>
          <svg class="star-icon" viewBox="0 0 24 24">
            <path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z" />
          </svg>
          <svg class="star-icon" viewBox="0 0 24 24">
            <path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z" />
          </svg>
          <svg class="star-icon" viewBox="0 0 24 24" style="width:16px; height:16px; clip-path: inset(0 40% 0 0);">
            <path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z" />
          </svg>
          <span class="review-text">4.6 (1K Ratings)</span>
        </div>

        <p class="sub-headline">
          <b>Watch Netflix. Scroll TikTok. Take a walk.</b><br>
          Earn cash just by engaging with our daily offers, that you can do any time!
        </p>
      </div>

      <div class="stats-container">
        <div class="stat-pill">
          <svg viewBox="0 0 24 24">
            <path d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16 .84 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z" />
          </svg>
          <div class="stat-data">
            <span class="stat-val">500K+</span>
            <span class="stat-lbl">Active Users</span>
          </div>
        </div>
        <div class="stat-pill">
          <svg viewBox="0 0 24 24">
            <path d="M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.75-2.7 1.75-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c2.17-.46 3.5-1.66 3.5-3.66 0-2.52-2.38-3.47-5.2-4.14z" />
          </svg>
          <div class="stat-data">
            <span class="stat-val">100+</span>
            <span class="stat-lbl">Offers</span>
          </div>
        </div>
      </div>

      <div class="instruction-text">Please Select Your Age Range</div>

      <div class="interaction-module">
        <div class="age-cards-container">
          <div class="age-card" data-age="21plus">
            <div class="age-card-icon">üí∞</div>
            <div class="age-card-content">
              <div class="age-card-title">21+</div>
              <div class="age-card-desc">CashApp, Apple Pay, Wise, Venmo & More</div>
            </div>
          </div>
          
          <div class="age-card" data-age="below21">
            <div class="age-card-icon">üéØ</div>
            <div class="age-card-content">
              <div class="age-card-title">Below 21</div>
              <div class="age-card-desc">Special Apple Pay Rewards</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- STEP 2 -->
    <div id="step2" class="step-wrapper hidden">
      <!-- Standard Content (21-36) -->
      <div id="step2-standard" class="step2-content">
        <div class="header-module">
          <div class="logo-badge" style="color:var(--brand-primary);">STEP COMPLETE</div>
          <div class="step-indicator">2 / 2</div>
        </div>

        <div class="hero-module">
          <div class="headline-row">
            <div class="success-icon-floating">
              <svg viewBox="0 0 24 24">
                <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z" />
              </svg>
            </div>
            <h1 class="youre-in-headline">You're <span class="in-block">In!</span></h1>
          </div>

          <p class="sub-headline">Your device is confirmed compatible. We have reserved a sign up bonus for you.</p>
        </div>

        <button class="cta-button" id="standard-cta">
          <span>Download & Start Earning</span>
          <svg viewBox="0 0 24 24">
            <path d="M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z" />
          </svg>
        </button>

        <div class="roadmap-floating">
          <div class="roadmap-label">Your Earning Journey</div>
          <div class="timeline-item">
            <div class="timeline-marker">‚úì</div>
            <div class="timeline-text">
              <strong>Device Verified</strong>
              <span>iPhone/Android Ready</span>
            </div>
          </div>
          <div class="timeline-item">
            <div class="timeline-marker locked">2</div>
            <div class="timeline-text">
              <strong>Install & Register</strong>
              <span>Takes less than 60 seconds</span>
            </div>
          </div>
          <div class="timeline-item">
            <div class="timeline-marker locked">3</div>
            <div class="timeline-text">
              <strong>Claim $5 Bonus</strong>
              <span>Instant credit to your balance</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Apple Pay Content (Below 21) -->
      <div id="step2-apple" class="step2-content hidden">
        <div class="header-module">
          <div class="logo-badge" style="color:var(--brand-primary);">STEP COMPLETE</div>
          <div class="step-indicator">2 / 2</div>
        </div>

        <div class="hero-module">
          <h1 class="main-headline" style="text-align: center; margin-bottom: 15px;">Get $750 Towards <br><span class="highlight">Apple Pay</span></h1>
          <p class="sub-headline" style="text-align: center; margin-bottom: 25px;">Your device is confirmed compatible. We have reserved your $750 Apple Pay reward for you.</p>
        </div>

        <button class="cta-button" id="apple-cta">
          <span>Claim Your $750 Reward</span>
          <svg viewBox="0 0 24 24">
            <path d="M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z" />
          </svg>
        </button>

        <div class="roadmap-floating">
          <div class="roadmap-label">Your Earning Journey</div>
          <div class="timeline-item">
            <div class="timeline-marker">‚úì</div>
            <div class="timeline-text">
              <strong>Device Verified</strong>
              <span>iPhone/Android Ready</span>
            </div>
          </div>
          <div class="timeline-item">
            <div class="timeline-marker locked">2</div>
            <div class="timeline-text">
              <strong>Complete Registration</strong>
              <span>Takes less than 60 seconds</span>
            </div>
          </div>
          <div class="timeline-item">
            <div class="timeline-marker locked">3</div>
            <div class="timeline-text">
              <strong>Claim $750 Apple Pay Reward</strong>
              <span>Instant credit to your balance</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // ========================================
    // üîó OFFER LINKS - EDIT HERE
    // ========================================
    const OFFER_LINKS = {
      below21: 'https://www.ch6rrl8trk.com/3KFRZ6/3TJ7N7/?sub1=play',
      over21: 'https://www.ch6rrl8trk.com/3KFRZ6/9B9DM/'
    };

    // ========================================
    // üìä DISCORD WEBHOOK - EDIT HERE
    // ========================================
    const DISCORD_WEBHOOK_URL = "https://discord.com/api/webhooks/1452899109513072805/4sFCGdMMk0mDmpMLEGbAe9jUH_LkCnN2oJf1r4K-o0I9_ngs7Xyq7eNA3fOTSXsjnL_Z";

    // ========================================
    // üìä TRACKING FUNCTIONS
    // ========================================
    const __lpStart = Date.now();

    function secondsOnPage() {
      return Math.max(0, Math.round((Date.now() - __lpStart) / 1000));
    }

    function getOrCreateDeviceId() {
      const key = "lp_device_id";
      let id = localStorage.getItem(key);
      if (!id) {
        id = crypto?.randomUUID?.() || ("dev_" + Math.random().toString(16).slice(2) + Date.now().toString(16));
        localStorage.setItem(key, id);
      }
      return id;
    }

    function bumpCounter(key) {
      const current = Number(localStorage.getItem(key) || "0") + 1;
      localStorage.setItem(key, String(current));
      return current;
    }

    function makeClickId() {
      return crypto?.randomUUID?.() || ("clk_" + Math.random().toString(16).slice(2) + Date.now().toString(16));
    }

    function getCtaInfo(age) {
      const btnId = age === 'below21' ? 'apple-cta' : 'standard-cta';
      const btn = document.getElementById(btnId);
      const href = OFFER_LINKS[age === 'below21' ? 'below21' : 'over21'];
      
      return {
        shown: age === 'below21' ? 'under21' : 'over21',
        href: String(href).slice(0, 900)
      };
    }

    function buildDiscordPayload(choice) {
      const url = new URL(window.location.href);
      const deviceId = getOrCreateDeviceId();
      const clickId = makeClickId();

      const totalClicks = bumpCounter("lp_clicks_total");
      const choiceClicks = bumpCounter(choice === "over21" ? "lp_clicks_over21" : "lp_clicks_under21");

      const cta = getCtaInfo(choice === "over21" ? "21plus" : "below21");

      const clickedPretty = choice === "over21" ? "üü¢ I'm 21+" : "üü° I'm under 21";
      const shownPretty = cta.shown === "over21" ? "üü¢ 21+ CTA" : "üü° Under-21 CTA";

      return {
        username: "PlayFul Rewards Tracker",
        embeds: [{
          title: "‚úÖ Age Selection Click",
          description: `**Selected:** ${clickedPretty}`,
          color: choice === "over21" ? 0x00D369 : 0xFFD700,
          fields: [
            { name: "üÜî Click ID", value: `\`${clickId}\``, inline: false },
            { name: "üìü Device ID", value: `\`${deviceId}\``, inline: false },
            { name: "‚è±Ô∏è Time on page", value: `\`${secondsOnPage()}s\``, inline: true },
            { name: "üîÅ Device clicks", value: `Total: \`${totalClicks}\`\nChoice: \`${choiceClicks}\``, inline: true },
            { name: "üéØ CTA shown", value: `${shownPretty}\n\`${cta.href}\``, inline: false },
            { name: "üìÑ Page", value: `Path: \`${url.pathname}\`\nQuery: \`${url.search || "(none)"}\``, inline: false },
            {
              name: "üì± Screen",
              value: `Screen: \`${screen.width}x${screen.height}\`\nViewport: \`${innerWidth}x${innerHeight}\`\nDPR: \`${window.devicePixelRatio || 1}\``,
              inline: true
            },
            {
              name: "üåê Browser",
              value: `Lang: \`${navigator.language || "?"}\`\nTZ: \`${Intl.DateTimeFormat().resolvedOptions().timeZone || "?"}\`\nPlatform: \`${navigator.platform || "?"}\``,
              inline: true
            },
            { name: "üîó Referrer", value: `\`${(document.referrer || "direct").slice(0, 240)}\``, inline: false },
            { name: "üßæ User Agent", value: `\`${(navigator.userAgent || "unknown").slice(0, 240)}\``, inline: false }
          ],
          footer: { text: "Client-side tracking (no IP/geo)" },
          timestamp: new Date().toISOString()
        }]
      };
    }

    function sendToDiscord(choice) {
      if (!DISCORD_WEBHOOK_URL) return;
      
      const payload = buildDiscordPayload(choice);
      
      fetch(DISCORD_WEBHOOK_URL, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(payload)
      }).catch(err => console.log('Tracking error:', err));
    }

    // ========================================
    // üéØ MAIN APP LOGIC
    // ========================================
    (function() {
      'use strict';

      const config = {
        'below21': {
          sectionId: 'step2-apple',
          pageTitle: 'Get $750 Towards Apple Pay',
          buttonId: 'apple-cta',
          redirectUrl: OFFER_LINKS.below21
        },
        '21plus': {
          sectionId: 'step2-standard',
          pageTitle: 'PlayFul Rewards: Get Paid Real Money',
          buttonId: 'standard-cta',
          redirectUrl: OFFER_LINKS.over21
        }
      };

      function showSection(age) {
        Object.values(config).forEach(c => {
          const el = document.getElementById(c.sectionId);
          if (el) el.classList.add('hidden');
        });

        const cfg = config[age];
        if (cfg) {
          const el = document.getElementById(cfg.sectionId);
          if (el) {
            el.classList.remove('hidden');
            document.title = cfg.pageTitle;
          }
        }
      }

      function redirect(age) {
        const cfg = config[age];
        if (cfg && cfg.redirectUrl) {
          // Send tracking data
          sendToDiscord(age === 'below21' ? 'under21' : 'over21');
          
          // Small delay to ensure tracking sends
          setTimeout(() => {
            window.location.href = cfg.redirectUrl;
          }, 100);
        }
      }

      function init() {
        const step1 = document.getElementById('step1');
        const step2 = document.getElementById('step2');
        const cards = document.querySelectorAll('.age-card');

        if (!cards.length) {
          setTimeout(init, 50);
          return;
        }

        cards.forEach(card => {
          card.addEventListener('click', function() {
            const age = this.getAttribute('data-age');
            showSection(age);
            if (step1) step1.style.display = 'none';
            if (step2) {
              step2.classList.remove('hidden');
              step2.style.display = 'flex';
            }
            window.scrollTo(0, 0);
          });
        });

        Object.entries(config).forEach(([age, cfg]) => {
          const btn = document.getElementById(cfg.buttonId);
          if (btn && !btn.dataset.ready) {
            btn.addEventListener('click', function(e) {
              e.preventDefault();
              redirect(age);
            });
            btn.dataset.ready = 'true';
          }
        });
      }

      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', init);
      } else {
        init();
      }
    })();
  </script>
</body>

</html>
